(this.webpackJsonpdotnet_final_complete=this.webpackJsonpdotnet_final_complete||[]).push([[0],{65:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);n(54);var r=n(1),a=n.n(r),c=n(21),s=n.n(c),i=n(17),o=n(9),u=n(10),l=n(11),h=n(12),d=n(4),p=n(99),b=n(19),j=n(98),f=n(100),g=n(101),v=n(102),x=n(96),m=n(97),O=n(24),w=n(7),k=n(3),y=n.n(k),S=n(30),A="Dotnet_Final_Complete",C="returnUrl",R="message",U="logout-callback",I="logout",_="logged-out",T="login",P="login-callback",L="login-failed",M="profile",N="register",F="/authentication",D={DefaultLoginRedirectPath:"/",ApiAuthorizationClientConfigurationUrl:"_configuration/".concat(A),ApiAuthorizationPrefix:F,Login:"".concat(F,"/").concat(T),LoginFailed:"".concat(F,"/").concat(L),LoginCallback:"".concat(F,"/").concat(P),Register:"".concat(F,"/").concat(N),Profile:"".concat(F,"/").concat(M),LogOut:"".concat(F,"/").concat(I),LoggedOut:"".concat(F,"/").concat(_),LogOutCallback:"".concat(F,"/").concat(U),IdentityRegisterPath:"Identity/Account/Register",IdentityManagePath:"Identity/Account/Manage"},E=function(){function e(){Object(o.a)(this,e),this._callbacks=[],this._nextSubscriptionId=0,this._user=null,this._isAuthenticated=!1,this._popUpDisabled=!0}return Object(u.a)(e,[{key:"isAuthenticated",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:return t=e.sent,e.abrupt("return",!!t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._user||!this._user.profile){e.next=2;break}return e.abrupt("return",this._user.profile);case 2:return e.next=4,this.ensureUserManagerInitialized();case 4:return e.next=6,this.userManager.getUser();case 6:return t=e.sent,e.abrupt("return",t&&t.profile);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccessToken",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.next=4,this.userManager.getUser();case 4:return t=e.sent,e.abrupt("return",t&&t.access_token);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.prev=2,e.next=5,this.userManager.signinSilent(this.createArguments());case 5:return n=e.sent,this.updateState(n),e.abrupt("return",this.success(t));case 10:if(e.prev=10,e.t0=e.catch(2),console.log("Silent authentication error: ",e.t0),e.prev=13,!this._popUpDisabled){e.next=16;break}throw new Error("Popup disabled. Change 'AuthorizeService.js:AuthorizeService._popupDisabled' to false to enable it.");case 16:return e.next=18,this.userManager.signinPopup(this.createArguments());case 18:return r=e.sent,this.updateState(r),e.abrupt("return",this.success(t));case 23:if(e.prev=23,e.t1=e.catch(13),"Popup window closed"!==e.t1.message){e.next=29;break}return e.abrupt("return",this.error("The user closed the window."));case 29:this._popUpDisabled||console.log("Popup authentication error: ",e.t1);case 30:return e.prev=30,e.next=33,this.userManager.signinRedirect(this.createArguments(t));case 33:return e.abrupt("return",this.redirect());case 36:return e.prev=36,e.t2=e.catch(30),console.log("Redirect authentication error: ",e.t2),e.abrupt("return",this.error(e.t2));case 40:case"end":return e.stop()}}),e,this,[[2,10],[13,23],[30,36]])})));return function(t){return e.apply(this,arguments)}}()},{key:"completeSignIn",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ensureUserManagerInitialized();case 3:return e.next=5,this.userManager.signinCallback(t);case 5:return n=e.sent,this.updateState(n),e.abrupt("return",this.success(n&&n.state));case 10:return e.prev=10,e.t0=e.catch(0),console.log("There was an error signing in: ",e.t0),e.abrupt("return",this.error("There was an error signing in."));case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:if(e.prev=2,!this._popUpDisabled){e.next=5;break}throw new Error("Popup disabled. Change 'AuthorizeService.js:AuthorizeService._popupDisabled' to false to enable it.");case 5:return e.next=7,this.userManager.signoutPopup(this.createArguments());case 7:return this.updateState(void 0),e.abrupt("return",this.success(t));case 11:return e.prev=11,e.t0=e.catch(2),console.log("Popup signout error: ",e.t0),e.prev=14,e.next=17,this.userManager.signoutRedirect(this.createArguments(t));case 17:return e.abrupt("return",this.redirect());case 20:return e.prev=20,e.t1=e.catch(14),console.log("Redirect signout error: ",e.t1),e.abrupt("return",this.error(e.t1));case 24:case"end":return e.stop()}}),e,this,[[2,11],[14,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"completeSignOut",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.prev=2,e.next=5,this.userManager.signoutCallback(t);case 5:return n=e.sent,this.updateState(null),e.abrupt("return",this.success(n&&n.data));case 10:return e.prev=10,e.t0=e.catch(2),console.log("There was an error trying to log out '".concat(e.t0,"'.")),e.abrupt("return",this.error(e.t0));case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateState",value:function(e){this._user=e,this._isAuthenticated=!!this._user,this.notifySubscribers()}},{key:"subscribe",value:function(e){return this._callbacks.push({callback:e,subscription:this._nextSubscriptionId++}),this._nextSubscriptionId-1}},{key:"unsubscribe",value:function(e){var t=this._callbacks.map((function(t,n){return t.subscription===e?{found:!0,index:n}:{found:!1}})).filter((function(e){return!0===e.found}));if(1!==t.length)throw new Error("Found an invalid number of subscriptions ".concat(t.length));this._callbacks.splice(t[0].index,1)}},{key:"notifySubscribers",value:function(){for(var e=0;e<this._callbacks.length;e++){(0,this._callbacks[e].callback)()}}},{key:"createArguments",value:function(e){return{useReplaceToNavigate:!0,data:e}}},{key:"error",value:function(e){return{status:B.Fail,message:e}}},{key:"success",value:function(e){return{status:B.Success,state:e}}},{key:"redirect",value:function(){return{status:B.Redirect}}},{key:"ensureUserManagerInitialized",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,r=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.userManager){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(D.ApiAuthorizationClientConfigurationUrl);case 4:if((t=e.sent).ok){e.next=7;break}throw new Error("Could not load settings for '".concat(A,"'"));case 7:return e.next=9,t.json();case 9:(n=e.sent).automaticSilentRenew=!0,n.includeIdTokenInSilentRenew=!0,n.userStore=new S.WebStorageStateStore({prefix:A}),this.userManager=new S.UserManager(n),this.userManager.events.addUserSignedOut(Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.userManager.removeUser();case 2:r.updateState(void 0);case 3:case"end":return e.stop()}}),e)}))));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"instance",get:function(){return z}}]),e}(),z=new E,W=z,B={Redirect:"redirect",Success:"success",Fail:"fail"},V=n(0),H=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={isAuthenticated:!1,userName:null},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._subscription=W.subscribe((function(){return e.populateState()})),this.populateState()}},{key:"componentWillUnmount",value:function(){W.unsubscribe(this._subscription)}},{key:"populateState",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([W.isAuthenticated(),W.getUser()]);case 2:t=e.sent,n=Object(O.a)(t,2),r=n[0],a=n[1],this.setState({isAuthenticated:r,userName:a&&a.name});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isAuthenticated,n=e.userName;if(t){var r="".concat(D.Profile),a={pathname:"".concat(D.LogOut),state:{local:!0}};return this.authenticatedView(n,r,a)}var c="".concat(D.Register),s="".concat(D.Login);return this.anonymousView(c,s)}},{key:"authenticatedView",value:function(e,t,n){return Object(V.jsxs)(r.Fragment,{children:[Object(V.jsx)(x.a,{children:Object(V.jsxs)(m.a,{tag:i.b,className:"text-dark",to:t,children:["Hello ",e]})}),Object(V.jsx)(x.a,{children:Object(V.jsx)(m.a,{tag:i.b,className:"text-dark",to:n,children:"Logout"})})]})}},{key:"anonymousView",value:function(e,t){return Object(V.jsxs)(r.Fragment,{children:[Object(V.jsx)(x.a,{children:Object(V.jsx)(m.a,{tag:i.b,className:"text-dark",to:e,children:"Register"})}),Object(V.jsx)(x.a,{children:Object(V.jsx)(m.a,{tag:i.b,className:"text-dark",to:t,children:"Login"})})]})}}]),n}(r.Component),J=(n(65),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).toggleNavbar=r.toggleNavbar.bind(Object(b.a)(r)),r.state={collapsed:!0},r}return Object(u.a)(n,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){return Object(V.jsx)("header",{children:Object(V.jsx)(j.a,{className:"navbar-expand-sm navbar-toggleable-sm ng-white border-bottom box-shadow mb-3",light:!0,children:Object(V.jsxs)(p.a,{children:[Object(V.jsx)(f.a,{tag:i.b,to:"/",children:"Dotnet_Final_Complete"}),Object(V.jsx)(g.a,{onClick:this.toggleNavbar,className:"mr-2"}),Object(V.jsx)(v.a,{className:"d-sm-inline-flex flex-sm-row-reverse",isOpen:!this.state.collapsed,navbar:!0,children:Object(V.jsxs)("ul",{className:"navbar-nav flex-grow",children:[Object(V.jsx)(x.a,{children:Object(V.jsx)(m.a,{tag:i.b,className:"text-dark",to:"/",children:"Home"})}),Object(V.jsx)(x.a,{children:Object(V.jsx)(m.a,{tag:i.b,className:"text-dark",to:"/counter",children:"Counter"})}),Object(V.jsx)(x.a,{children:Object(V.jsx)(m.a,{tag:i.b,className:"text-dark",to:"/fetch-data",children:"Fetch data"})}),Object(V.jsx)(H,{})]})})]})})})}}]),n}(r.Component));J.displayName=J.name;var Y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(V.jsxs)("div",{children:[Object(V.jsx)(J,{}),Object(V.jsx)(p.a,{children:this.props.children})]})}}]),n}(r.Component);Y.displayName=Y.name;var $=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(V.jsxs)("div",{children:[Object(V.jsx)("h1",{children:"Hello, world!"}),Object(V.jsx)("p",{children:"Welcome to your new single-page application, built with:"}),Object(V.jsxs)("ul",{children:[Object(V.jsxs)("li",{children:[Object(V.jsx)("a",{href:"https://get.asp.net/",children:"ASP.NET Core"})," and ",Object(V.jsx)("a",{href:"https://msdn.microsoft.com/en-us/library/67ef8sbd.aspx",children:"C#"})," for cross-platform server-side code"]}),Object(V.jsxs)("li",{children:[Object(V.jsx)("a",{href:"https://facebook.github.io/react/",children:"React"})," for client-side code"]}),Object(V.jsxs)("li",{children:[Object(V.jsx)("a",{href:"http://getbootstrap.com/",children:"Bootstrap"})," for layout and styling"]})]}),Object(V.jsx)("p",{children:"To help you get started, we have also set up:"}),Object(V.jsxs)("ul",{children:[Object(V.jsxs)("li",{children:[Object(V.jsx)("strong",{children:"Client-side navigation"}),". For example, click ",Object(V.jsx)("em",{children:"Counter"})," then ",Object(V.jsx)("em",{children:"Back"})," to return here."]}),Object(V.jsxs)("li",{children:[Object(V.jsx)("strong",{children:"Development server integration"}),". In development mode, the development server from ",Object(V.jsx)("code",{children:"create-react-app"})," runs in the background automatically, so your client-side resources are dynamically built on demand and the page refreshes when you modify any file."]}),Object(V.jsxs)("li",{children:[Object(V.jsx)("strong",{children:"Efficient production builds"}),". In production mode, development-time features are disabled, and your ",Object(V.jsx)("code",{children:"dotnet publish"})," configuration produces minified, efficiently bundled JavaScript files."]})]}),Object(V.jsxs)("p",{children:["The ",Object(V.jsx)("code",{children:"ClientApp"})," subdirectory is a standard React application based on the ",Object(V.jsx)("code",{children:"create-react-app"})," template. If you open a command prompt in that directory, you can run ",Object(V.jsx)("code",{children:"npm"})," commands such as ",Object(V.jsx)("code",{children:"npm test"})," or ",Object(V.jsx)("code",{children:"npm install"}),"."]})]})}}]),n}(r.Component);$.displayName=$.name;var q=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={forecasts:[],loading:!0},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.populateWeatherData()}},{key:"render",value:function(){var e=this.state.loading?Object(V.jsx)("p",{children:Object(V.jsx)("em",{children:"Loading..."})}):n.renderForecastsTable(this.state.forecasts);return Object(V.jsxs)("div",{children:[Object(V.jsx)("h1",{id:"tabelLabel",children:"Weather forecast"}),Object(V.jsx)("p",{children:"This component demonstrates fetching data from the server."}),e]})}},{key:"populateWeatherData",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getAccessToken();case 2:return t=e.sent,e.next=5,fetch("weatherforecast",{headers:t?{Authorization:"Bearer ".concat(t)}:{}});case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,this.setState({forecasts:r,loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"renderForecastsTable",value:function(e){return Object(V.jsxs)("table",{className:"table table-striped","aria-labelledby":"tabelLabel",children:[Object(V.jsx)("thead",{children:Object(V.jsxs)("tr",{children:[Object(V.jsx)("th",{children:"Date"}),Object(V.jsx)("th",{children:"Temp. (C)"}),Object(V.jsx)("th",{children:"Temp. (F)"}),Object(V.jsx)("th",{children:"Summary"})]})}),Object(V.jsx)("tbody",{children:e.map((function(e){return Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:e.date}),Object(V.jsx)("td",{children:e.temperatureC}),Object(V.jsx)("td",{children:e.temperatureF}),Object(V.jsx)("td",{children:e.summary})]},e.date)}))})]})}}]),n}(r.Component);q.displayName=q.name;var G=n(52),K=n.n(G),Q=n(32),X=n.n(Q);function Z(){var e=new(window.AudioContext||window.webkitAudioContext),t=a.a.useState(null),n=Object(O.a)(t,2),r=n[0],c=n[1],s=new X.a(e,{});return navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){return s.init(e)})).catch((function(e){return console.log("Uh oh... unable to get stream...",e)})),Object(V.jsxs)("div",{children:[Object(V.jsx)("h1",{children:"Counter"}),Object(V.jsx)("p",{children:"This is a simple example of a React component."}),Object(V.jsx)("button",{className:"btn btn-primary",onClick:function(){s.start().then((function(){return!0}))},children:"Record Audio"}),Object(V.jsx)("button",{id:"stop",className:"btn btn-primary",onClick:function(){s.stop().then((function(e){var t=e.blob;e.buffer;c(t)}))},children:"Stop"}),Object(V.jsx)("button",{id:"send",className:"btn btn-primary",onClick:function(){var e=new FormData;e.append("blob",r,"audio.wav"),K.a.post("/speech",e,{headers:{"content-type":"multipart/form-data"}}),X.a.download(r,"my-audio-file")},children:"Send"}),Object(V.jsx)("audio",{id:"audioDiv"})]})}var ee=n(26),te=n(53),ne=["component"],re=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={ready:!1,authenticated:!1},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._subscription=W.subscribe((function(){return e.authenticationChanged()})),this.populateAuthenticationState()}},{key:"componentWillUnmount",value:function(){W.unsubscribe(this._subscription)}},{key:"render",value:function(){var e=this.state,t=e.ready,n=e.authenticated,r=document.createElement("a");r.href=this.props.path;var a="".concat(r.protocol,"//").concat(r.host).concat(r.pathname).concat(r.search).concat(r.hash),c="".concat(D.Login,"?").concat(C,"=").concat(encodeURIComponent(a));if(t){var s=this.props,i=s.component,o=Object(te.a)(s,ne);return Object(V.jsx)(d.b,Object(ee.a)(Object(ee.a)({},o),{},{render:function(e){return n?Object(V.jsx)(i,Object(ee.a)({},e)):Object(V.jsx)(d.a,{to:c})}}))}return Object(V.jsx)("div",{})}},{key:"populateAuthenticationState",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.isAuthenticated();case 2:t=e.sent,this.setState({ready:!0,authenticated:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authenticationChanged",value:function(){var e=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ready:!1,authenticated:!1}),e.next=3,this.populateAuthenticationState();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(r.Component),ae=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={message:void 0},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.action;switch(e){case T:this.login(this.getReturnUrl());break;case P:this.processLoginCallback();break;case L:var t=new URLSearchParams(window.location.search).get(R);this.setState({message:t});break;case M:this.redirectToProfile();break;case N:this.redirectToRegister();break;default:throw new Error("Invalid action '".concat(e,"'"))}}},{key:"render",value:function(){var e=this.props.action,t=this.state.message;if(t)return Object(V.jsx)("div",{children:t});switch(e){case T:return Object(V.jsx)("div",{children:"Processing login"});case P:return Object(V.jsx)("div",{children:"Processing login callback"});case M:case N:return Object(V.jsx)("div",{});default:throw new Error("Invalid action '".concat(e,"'"))}}},{key:"login",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={returnUrl:t},e.next=3,W.signIn(n);case 3:r=e.sent,e.t0=r.status,e.next=e.t0===B.Redirect?7:e.t0===B.Success?8:e.t0===B.Fail?11:13;break;case 7:case 10:return e.abrupt("break",14);case 8:return e.next=10,this.navigateToReturnUrl(t);case 11:return this.setState({message:r.message}),e.abrupt("break",14);case 13:throw new Error("Invalid status result ".concat(r.status,"."));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processLoginCallback",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,W.completeSignIn(t);case 3:n=e.sent,e.t0=n.status,e.next=e.t0===B.Redirect?7:e.t0===B.Success?8:e.t0===B.Fail?11:13;break;case 7:throw new Error("Should not redirect.");case 8:return e.next=10,this.navigateToReturnUrl(this.getReturnUrl(n.state));case 10:return e.abrupt("break",14);case 11:return this.setState({message:n.message}),e.abrupt("break",14);case 13:throw new Error("Invalid authentication result status '".concat(n.status,"'."));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getReturnUrl",value:function(e){var t=new URLSearchParams(window.location.search).get(C);if(t&&!t.startsWith("".concat(window.location.origin,"/")))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return e&&e.returnUrl||t||"".concat(window.location.origin,"/")}},{key:"redirectToRegister",value:function(){this.redirectToApiAuthorizationPath("".concat(D.IdentityRegisterPath,"?").concat(C,"=").concat(encodeURI(D.Login)))}},{key:"redirectToProfile",value:function(){this.redirectToApiAuthorizationPath(D.IdentityManagePath)}},{key:"redirectToApiAuthorizationPath",value:function(e){var t="".concat(window.location.origin,"/").concat(e);window.location.replace(t)}},{key:"navigateToReturnUrl",value:function(e){window.location.replace(e)}}]),n}(r.Component),ce=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={message:void 0,isReady:!1,authenticated:!1},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.action;switch(e){case I:window.history.state.state.local?this.logout(this.getReturnUrl()):this.setState({isReady:!0,message:"The logout was not initiated from within the page."});break;case U:this.processLogoutCallback();break;case _:this.setState({isReady:!0,message:"You successfully logged out!"});break;default:throw new Error("Invalid action '".concat(e,"'"))}this.populateAuthenticationState()}},{key:"render",value:function(){var e=this.state,t=e.isReady,n=e.message;if(!t)return Object(V.jsx)("div",{});if(n)return Object(V.jsx)("div",{children:n});var r=this.props.action;switch(r){case I:return Object(V.jsx)("div",{children:"Processing logout"});case U:return Object(V.jsx)("div",{children:"Processing logout callback"});case _:return Object(V.jsx)("div",{children:n});default:throw new Error("Invalid action '".concat(r,"'"))}}},{key:"logout",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={returnUrl:t},e.next=3,W.isAuthenticated();case 3:if(!e.sent){e.next=20;break}return e.next=7,W.signOut(n);case 7:r=e.sent,e.t0=r.status,e.next=e.t0===B.Redirect?11:e.t0===B.Success?12:e.t0===B.Fail?15:17;break;case 11:return e.abrupt("break",18);case 12:return e.next=14,this.navigateToReturnUrl(t);case 14:return e.abrupt("break",18);case 15:return this.setState({message:r.message}),e.abrupt("break",18);case 17:throw new Error("Invalid authentication result status.");case 18:e.next=21;break;case 20:this.setState({message:"You successfully logged out!"});case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processLogoutCallback",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,W.completeSignOut(t);case 3:n=e.sent,e.t0=n.status,e.next=e.t0===B.Redirect?7:e.t0===B.Success?8:e.t0===B.Fail?11:13;break;case 7:throw new Error("Should not redirect.");case 8:return e.next=10,this.navigateToReturnUrl(this.getReturnUrl(n.state));case 10:return e.abrupt("break",14);case 11:return this.setState({message:n.message}),e.abrupt("break",14);case 13:throw new Error("Invalid authentication result status.");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"populateAuthenticationState",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.isAuthenticated();case 2:t=e.sent,this.setState({isReady:!0,authenticated:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getReturnUrl",value:function(e){var t=new URLSearchParams(window.location.search).get(C);if(t&&!t.startsWith("".concat(window.location.origin,"/")))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return e&&e.returnUrl||t||"".concat(window.location.origin).concat(D.LoggedOut)}},{key:"navigateToReturnUrl",value:function(e){return window.location.replace(e)}}]),n}(r.Component),se=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(V.jsxs)(r.Fragment,{children:[Object(V.jsx)(d.b,{path:D.Login,render:function(){return ie(T)}}),Object(V.jsx)(d.b,{path:D.LoginFailed,render:function(){return ie(L)}}),Object(V.jsx)(d.b,{path:D.LoginCallback,render:function(){return ie(P)}}),Object(V.jsx)(d.b,{path:D.Profile,render:function(){return ie(M)}}),Object(V.jsx)(d.b,{path:D.Register,render:function(){return ie(N)}}),Object(V.jsx)(d.b,{path:D.LogOut,render:function(){return oe(I)}}),Object(V.jsx)(d.b,{path:D.LogOutCallback,render:function(){return oe(U)}}),Object(V.jsx)(d.b,{path:D.LoggedOut,render:function(){return oe(_)}})]})}}]),n}(r.Component);function ie(e){return Object(V.jsx)(ae,{action:e})}function oe(e){return Object(V.jsx)(ce,{action:e})}n(94);var ue=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(V.jsxs)(Y,{children:[Object(V.jsx)(d.b,{exact:!0,path:"/",component:$}),Object(V.jsx)(d.b,{path:"/counter",component:Z}),Object(V.jsx)(re,{path:"/fetch-data",component:q}),Object(V.jsx)(d.b,{path:D.ApiAuthorizationPrefix,component:se})]})}}]),n}(r.Component);ue.displayName=ue.name;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,103)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},he=document.getElementsByTagName("base")[0].getAttribute("href"),de=document.getElementById("root");s.a.render(Object(V.jsx)(i.a,{basename:he,children:Object(V.jsx)(ue,{})}),de),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),le()}},[[95,1,2]]]);
//# sourceMappingURL=main.cdc2f6d0.chunk.js.map